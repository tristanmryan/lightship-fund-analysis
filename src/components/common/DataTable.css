/* DataTable Unified Styles */

/* Base DataTable Styles */
.datatable {
  --datatable-border-color: #e5e7eb;
  --datatable-header-bg: #f9fafb;
  --datatable-header-text: #374151;
  --datatable-row-hover: #f8fafc;
  --datatable-row-selected: #eff6ff;
  --datatable-row-focused: #dbeafe;
  --datatable-recommended-bg: #fafafa;
  --datatable-recommended-border: #10b981;
  --datatable-benchmark-bg: #f8fafc;
  --datatable-benchmark-border: #3b82f6;
  --datatable-text-primary: #111827;
  --datatable-text-secondary: #6b7280;
  --datatable-text-muted: #9ca3af;

  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  width: 100%;
  position: relative;
  background: white;
  border-radius: 8px;
  border: 1px solid var(--datatable-border-color);
  overflow: hidden;
}

/* Visual Refresh Theme */
.datatable.datatable-visual-refresh {
  --datatable-border-color: #d1d5db;
  --datatable-header-bg: #f3f4f6;
  --datatable-row-hover: #f9fafb;
  --datatable-recommended-bg: #f0fdf4;
  --datatable-recommended-border: #22c55e;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

/* Theme Variants */
.datatable.datatable-theme-modern {
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.datatable.datatable-theme-enhanced {
  --datatable-header-bg: #1f2937;
  --datatable-header-text: #f9fafb;
  --datatable-border-color: #374151;
  background: #111827;
  color: #f9fafb;
}

/* Density Variants */
.datatable.datatable-density-compact {
  --datatable-cell-padding: 0.25rem 0.5rem;
  --datatable-row-height: 40px;
}

.datatable.datatable-density-normal {
  --datatable-cell-padding: 0.5rem 0.75rem;
  --datatable-row-height: 60px;
}

.datatable.datatable-density-comfortable {
  --datatable-cell-padding: 0.75rem 1rem;
  --datatable-row-height: 80px;
}

/* Loading State */
.datatable-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  color: var(--datatable-text-secondary);
  gap: 1rem;
}

.datatable-loading-spinner {
  animation: spin 1s linear infinite;
  width: 2rem;
  height: 2rem;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.datatable-loading-text {
  font-size: 0.875rem;
  font-weight: 500;
}

/* Error State */
.datatable-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  color: #dc2626;
  gap: 1rem;
}

.datatable-error-icon {
  width: 2rem;
  height: 2rem;
}

.datatable-error-text {
  font-size: 0.875rem;
  font-weight: 500;
  text-align: center;
}

/* Empty State */
.datatable-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  color: var(--datatable-text-muted);
}

.datatable-empty-text {
  font-size: 0.875rem;
  font-style: italic;
}

/* Controls */
.datatable-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid var(--datatable-border-color);
  background: var(--datatable-header-bg);
}

/* Scroll Container */
.datatable-scroll-container {
  overflow: auto;
  flex: 1;
  position: relative;
}

/* Table */
.datatable-table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
}

.datatable-table-virtual {
  position: sticky;
  top: 0;
  z-index: 10;
}

/* Header */
.datatable-header {
  background: var(--datatable-header-bg);
  color: var(--datatable-header-text);
}

.datatable-header-sticky {
  position: sticky;
  top: 0;
  z-index: 20;
}

.datatable-header-row {
  border-bottom: 2px solid var(--datatable-border-color);
}

.datatable-header-cell {
  padding: var(--datatable-cell-padding);
  text-align: left;
  font-weight: 600;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.025em;
  border-right: 1px solid var(--datatable-border-color);
  white-space: nowrap;
  user-select: none;
  position: relative;
}

.datatable-header-cell:last-child {
  border-right: none;
}

.datatable-header-cell.datatable-sortable {
  cursor: pointer;
  transition: background-color 0.15s ease-in-out;
}

.datatable-header-cell.datatable-sortable:hover {
  background: rgba(0, 0, 0, 0.05);
}

.datatable-header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.datatable-header-label {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Sort Indicators */
.datatable-sort-indicator {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  opacity: 0.6;
  transition: opacity 0.15s ease-in-out;
}

.datatable-header-cell:hover .datatable-sort-indicator {
  opacity: 1;
}

.datatable-sort-indicator-active {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: #3b82f6;
}

.datatable-sort-icon {
  width: 14px;
  height: 14px;
}

.datatable-sort-icon-neutral {
  width: 14px;
  height: 14px;
  opacity: 0.4;
}

.datatable-sort-priority {
  background: #3b82f6;
  color: white;
  border-radius: 50%;
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.625rem;
  font-weight: 600;
}

/* Selection Header */
.datatable-selection-header {
  width: 48px;
  text-align: center;
  padding: 0.5rem;
}

.datatable-selection-header input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

/* Table Body */
.datatable-body {
  background: white;
}

/* Rows */
.datatable-row {
  transition: all 0.15s ease-in-out;
  border-bottom: 1px solid var(--datatable-border-color);
}

.datatable-row:last-child {
  border-bottom: none;
}

.datatable-row.datatable-row-hover:hover {
  background: var(--datatable-row-hover);
}

.datatable-row.datatable-row-selected {
  background: var(--datatable-row-selected);
}

.datatable-row.datatable-row-focused {
  background: var(--datatable-row-focused);
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
}

/* Special Row Types */
.datatable-row.datatable-row-recommended {
  background: var(--datatable-recommended-bg);
  border-left: 3px solid var(--datatable-recommended-border);
}

.datatable-row.datatable-row-recommended:hover {
  background: #f0fdf4;
}

.datatable-row.datatable-row-benchmark {
  background: var(--datatable-benchmark-bg);
  border-left: 3px solid var(--datatable-benchmark-border);
  font-style: italic;
}

.datatable-row.datatable-row-benchmark:hover {
  background: #eff6ff;
}

/* Cells */
.datatable-cell {
  padding: var(--datatable-cell-padding);
  vertical-align: middle;
  border-right: 1px solid var(--datatable-border-color);
  color: var(--datatable-text-primary);
  font-size: 0.875rem;
  line-height: 1.25;
}

.datatable-cell:last-child {
  border-right: none;
}

.datatable-cell-content {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Selection Cells */
.datatable-selection-cell {
  width: 48px;
  text-align: center;
  padding: 0.5rem;
}

.datatable-selection-cell input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

/* Virtual Scrolling */
.datatable-virtual-container {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.datatable-virtual-list {
  flex: 1;
  outline: none;
}

.datatable-virtual-row {
  display: contents;
}

/* Footer */
.datatable-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  border-top: 1px solid var(--datatable-border-color);
  background: var(--datatable-header-bg);
  font-size: 0.75rem;
  color: var(--datatable-text-secondary);
}

.datatable-stats {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.datatable-filter-indicator {
  color: #3b82f6;
  font-weight: 500;
}

.datatable-selection-indicator {
  color: #059669;
  font-weight: 500;
}

/* Density Specific Styles */
.datatable-row.datatable-density-compact {
  height: var(--datatable-row-height);
}

.datatable-row.datatable-density-normal {
  height: var(--datatable-row-height);
}

.datatable-row.datatable-density-comfortable {
  height: var(--datatable-row-height);
}

/* Enhanced Theme Dark Mode */
.datatable.datatable-theme-enhanced {
  background: #111827;
  border-color: #374151;
}

.datatable.datatable-theme-enhanced .datatable-body {
  background: #111827;
}

.datatable.datatable-theme-enhanced .datatable-row {
  border-color: #374151;
}

.datatable.datatable-theme-enhanced .datatable-cell {
  border-color: #374151;
  color: #f9fafb;
}

.datatable.datatable-theme-enhanced .datatable-row:hover {
  background: #1f2937;
}

.datatable.datatable-theme-enhanced .datatable-row-selected {
  background: #1e3a8a;
}

/* Responsive Design */
@media (max-width: 768px) {
  .datatable {
    font-size: 0.8rem;
  }
  
  .datatable-cell {
    padding: 0.375rem 0.5rem;
  }
  
  .datatable-header-cell {
    padding: 0.375rem 0.5rem;
    font-size: 0.75rem;
  }
  
  /* Hide less important columns on mobile */
  .datatable-cell[data-column="stdDev3Y"],
  .datatable-cell[data-column="stdDev5Y"],
  .datatable-cell[data-column="upCaptureRatio"],
  .datatable-cell[data-column="downCaptureRatio"],
  .datatable-cell[data-column="managerTenure"] {
    display: none;
  }
  
  .datatable-header-cell[data-column="stdDev3Y"],
  .datatable-header-cell[data-column="stdDev5Y"],
  .datatable-header-cell[data-column="upCaptureRatio"],
  .datatable-header-cell[data-column="downCaptureRatio"],
  .datatable-header-cell[data-column="managerTenure"] {
    display: none;
  }
}

@media (max-width: 480px) {
  .datatable-cell[data-column="sparkline"],
  .datatable-cell[data-column="threeYearReturn"],
  .datatable-cell[data-column="fiveYearReturn"],
  .datatable-cell[data-column="beta"],
  .datatable-cell[data-column="alpha"] {
    display: none;
  }
  
  .datatable-header-cell[data-column="sparkline"],
  .datatable-header-cell[data-column="threeYearReturn"],
  .datatable-header-cell[data-column="fiveYearReturn"],
  .datatable-header-cell[data-column="beta"],
  .datatable-header-cell[data-column="alpha"] {
    display: none;
  }
}

/* Print Styles */
@media print {
  .datatable {
    border: none;
    box-shadow: none;
  }
  
  .datatable-controls,
  .datatable-footer {
    display: none;
  }
  
  .datatable-row {
    break-inside: avoid;
  }
  
  .datatable-header {
    display: table-header-group;
  }
}

/* Focus Management */
.datatable:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.datatable-row:focus {
  outline: 2px solid #3b82f6;
  outline-offset: -2px;
}

/* Animation for smooth interactions */
.datatable-row,
.datatable-cell,
.datatable-sort-indicator {
  transition: all 0.15s ease-in-out;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .datatable {
    --datatable-border-color: #000000;
    --datatable-text-primary: #000000;
    --datatable-text-secondary: #000000;
  }
  
  .datatable-row:hover {
    background: #f0f0f0;
  }
  
  .datatable-row-selected {
    background: #e0e0e0;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .datatable-row,
  .datatable-cell,
  .datatable-sort-indicator,
  .datatable-loading-spinner {
    transition: none;
    animation: none;
  }
}